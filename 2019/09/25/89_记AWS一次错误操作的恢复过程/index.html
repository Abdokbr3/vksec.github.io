<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">





<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css">


  <meta name="keywords" content="网络安全,AWS,">





  <link rel="alternate" href="/atom.xml" title="Openresty Python LUA" type="application/atom+xml">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1">






<meta name="description" content="请输入密码,有问题请加QQ群:397745473">
<meta name="keywords" content="网络安全,AWS">
<meta property="og:type" content="article">
<meta property="og:title" content="记AWS一次错误操作的恢复过程">
<meta property="og:url" content="http://vksec.com/2019/09/25/89_记AWS一次错误操作的恢复过程/index.html">
<meta property="og:site_name" content="Openresty Python LUA">
<meta property="og:description" content="请输入密码,有问题请加QQ群:397745473">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-09-25T06:05:25.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="记AWS一次错误操作的恢复过程">
<meta name="twitter:description" content="请输入密码,有问题请加QQ群:397745473">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://vksec.com/2019/09/25/89_记AWS一次错误操作的恢复过程/">



  <title>记AWS一次错误操作的恢复过程 | Openresty Python LUA</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  














  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Openresty Python LUA</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">QQ群:397745473</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocapitalize="off" autocomplete="off" autocorrect="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>

<script data-ad-client="ca-pub-9873623505122626" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://vksec.com/2019/09/25/89_记AWS一次错误操作的恢复过程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="vsyour">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://i.imgur.com/luMBjvD.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Openresty Python LUA">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                记AWS一次错误操作的恢复过程
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-25T03:03:03+08:00">
                2019-09-25
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AWS/" itemprop="url" rel="index">
                    <span itemprop="name">AWS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/09/25/89_记AWS一次错误操作的恢复过程/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/09/25/89_记AWS一次错误操作的恢复过程/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script>
<div id="hbe-security">
  <div class="hbe-input-container">
  <input type="password" class="hbe-form-control" id="pass" placeholder="请输入密码,有问题请加QQ群:397745473">
    <label for="pass">请输入密码,有问题请加QQ群:397745473</label>
    <div class="bottom-line"></div>
  </div>
</div>
<div id="decryptionError" style="display: none;">Incorrect Password!</div>
<div id="noContentError" style="display: none;">No content to display!</div>
<div id="encrypt-blog" style="display:none">
U2FsdGVkX1+RZNHCRFFXqK7pOrSHLT6JR64i28GjSQmGbmOT/PsXvoZoBBjNkViAnY85CwacZhsQBhTAG39IZ5ZAyOrdnOhO0VP7JbcftVth4JJjekqZN4gBUHJzrBEuZvoHonKI51eh/1lCUtaoL/aZQTmMJXnpIECpA2Kooezq4RcwT9lRBHbCfDgFXF/4jw0UcVdFnWkP5ktyUikhjjsKp7hWVJEWHb0tfXznrd/hdGNngEMkPadNg3CJjVTJZvHXg37HX/Qosrrh/weE3l3MCx/sBMPAOY76PBpVzVzdvyvUql9oTSPPfiM1UXEFXGwJPkdj0g+HK2XU3Uj/9x/3a6+zuKm9HNzET8SsHuIjKMimgFr1d9ny42PxjNxD2oGChGQeXG0ZGU6aYyvUdce2uJ9R/rtbKQ8wUX5lJx1zhWrnSfhBjwT17+n5T97c1RHb9aBZfIELyxp85XNJUpRKuaVQnNJI4INNXSy09ASRDpjI53zcQmUcYRUwwu/EiCtoGvb/4ZxU2xXnEPvryg0dWwDwTfnYsiVJ0AyQClLalKrSN23CG/GI9btDq6mYHpnSp2525fvKrnG1UjLEqkR6zAvKgCgjXJ3MEhw57YvJzFhfdX5ithIG2nrmIiL9cXyahyxd8Mw8W7laVXB+PTCZR3AkVa/IvthS1lIH4/B2ALbJEOAkVlkdgE5o2phc0ZrcNPYsG/yHDV1BKSvayHrqv5QIKa5Axr322giNw5JT8G6uasM3hXmZjxMEKaagVvnC1bUzV3vPvQrhfI8N+TsinScAuumNGEez1vzw7UoTbaIEIDOGQnnUSXQyRBtYY8qYwtot85uy2De/AzO/OOtiKos7wWzRyRKJOGaG5QS92UT221JxDY3xjUNyDYdVZmL8iqe5TfN5NSqPmmtg2LHxwSCa6YFMDDIQq9mpiJz0WOI+M4ptP55RCmRPtUXCB7mJqvNYAVG5/nMtMPlX5lb0e5RwbygKhXFaNbrunTYN9ggJfZbv3Pp/vY2/tNcMk2xV5jZgRajmMX9YLRIthk4MCBdxFKwvo5F+td85jcIye7I0U0HD2nQ2ufmah+opHBWBtJgIxUaXpieBLuFN4sfE4Aoy9sW/7PCnAR+yftZwcp2U3aUE5/X+5vxtrkvPteP8EIRyXhkpldTlmFCXDErcvfCUHioWCniCrAyk5pXttqwvOeSiTzJx3FkC5kqFsDvuKh+xACWpzDVYXNE8ruZ2h3Z0adywCYdDwa9bNP/Pcqs664PX6cWsubze6mOc6B4E1dFk2lIUb/U10rtgzwMZZn3KwvPSpOAdEUPllBluRQ3pl7WY8BnVwfBWF0RMZfUnXnJs3HlUWbd5Wx1YdRjISC/F8ud2up7ALbbXuOFTXOvT5KVu6SC6vkCCJ8fBciIAzxEGRyrOtUntU6gQjVo9ZHQHVl/RDdR+whTd+knBYk/JI8G7q2cUHfE/fiR0N4hrz9FW3YqUPlOjS/UPI8bErnShl63Jl8IQdtgdDQjb2Fd8C2DixPn0UP8rJ5iqW90PyntVmQjO1hhjjcBdTB5fWxxZ6teyPFjJCpKSHzn4XFXJg97OLUy/LRcDDmi9ZDrdjKuR20P+cJq22RJ1cqwGkcHJF/6/ruWTM3HXIZMeSnkN4kPqDOqEp5srDQwDDWFroXiiYaNfroR1gubVLbRsZc14t1RdP5LeA4j/d+9geq0xpOC/679TFTaFW6eEDZdcCCe/SAM0oFbBRw75us2cFXsxUfxNIZ61EoCcvUnSvCVYZqvLtspjUmYbQWjsNztlSYeL/sBeSIQiCavjSmdEQ36l7f3/sDulE0WuGJ3NNKJwL91UDT4tWtkGHYKVNIAubnfNNBLs6GLUNeiPKJidBVI8lFWvLRKvk/ZS+3yJ+MwWW5pngJanzVNon27qeooB0JpM+k0LyeHeyPJwUypwhA0HpCsN5m0ojRzacB5/MhOFrOkP0WxveYfpDGqUg9QmQJew7YazLSHXi/Xl4JVijY4f9wY60JDXZJyl4SX9KCqGKp4pS4J125EUTWho+OV+FvVCzk998ITqKIUWsm5NwpDYDbfRR6Gilrlc7BvCGXnGcNBVOmHhNJaxI5iO4RQ4GYz4y7z+hco6ZPTvotr+Qgrb2roNOS51iGqnaO1fLj4OMVH02TI5yaihqKCgTaOYjYJeQVaed8pPSABjV4c2g8Yq8kMPRrKFECpFLP2W2HY9buOYOzxDfnnzW6CTnQ74PxylDDlL4s6C7vHCi2spbA85OXSmGuX623V5sQMlcT7l7nbT0Tb4UWSw+Vr9CbIHvGlqGk/aqINCO+YKA3f9sVfW3ZJuF5BbcIHBktg3WwtLxklivexhPf2UyZJHfFY/3WtekSYQgFILIV+v6NDFscWy/u4hCTOuXDLqzOpp0o8SGEq5AjPFn96vZ4ipWrFFOOuZGKisr9huhAeQmHcIqsmAcQtw7mk3A6DetDBsvcSdtf5ExB1EiGBX2ekCqYzTKKbhf4QOu81RSYPlJrUF73wuT9tQdBW3+zFd+LZaSHkko+gqFVj7wvP20xvaEpsFk3iULPkCeA6nBpQMJaABKXwt3OCabZiQQC+cJwYSW+aZRmnw/ZB3nn5VpeXimyNTuZ6yfaU7I2rWbT/ZnzVT0ye88gzXcVut73Ax8LilnkxN1nsX2v9Nc1QR1RbGaf96oXw8s3g9KJlchC2As2PyZIk3PbkHhsmHjicih057ys7fgTVXVIeiE/6gNiYVnZA/f5NttXShNfZfGgoA3231n/bKSRpjLrLvWAhZkRGYVaObvxtadq4BDo8LISs3/27F8hcxCP22yDtewakk/9gZV/PUn516qGQzJ95QAoUWIAHT4FeoNiJNh5IUmdu5QxhBADpgNWyhvzUgiJKIuoO/OxSljflKSMYC+98itkNf+upYt2lWeWgM2CwH5wWLCXv2TwNSw8enlN+dtwX+g5k5ZpS1Mx1bMGudUA30x2xhh25z7sGAP3inesprqF8agj93PQcJLU31brpWMimCA9de3FGNIEITHVzZSvqtr2wKED3739GGEdgPJ0LG+Uj1vmfReRrTAZ/WmQhm1W8CtUAK9dWsuKqroN5HBHyjPRHVxmtmgZwlXrir4M35VBk0UHQIvAjyhUgW4lKAasSvb1T1aOIw9nVH1LmVMoCoA2aQsR5xMjmu7dp6JtuZO3Sc+jfAtP6Ss7RxnIe0lThHNhZlUm8CLDPkdg9CMFgiFltfm8t8X0wC3jGw/+NGaOOrFtUlAeRQFbgVC7tx2YivJpAVTkSmsnqEe2HCXDWpOyTsojUJliUgBeWnUIa6Bnfn8tr3peK2NPTNnyBp0NLic5gxxhggt+gliUT3AQmt/66k4e2HMgwdVIO6YXX6ruK19FnZfh6psyYYa17xRis5Bui8sk3Ta8oBGLjz3h3EUutgtdC6Dw9kB0GSG2zfsTfKf241F9bkLK0VNBoPTM80//8Iyp9AVmYnLEbplD04vJ6/0513bPlXmgcku4bEkyFaoDke5lXlRuzPUOded2j5dZVfF7ZUxsli/EmYq2BvAj0SMQ2SlYcUW8FV/pcdDg02/x9LVC6MwcHHBg6MXBaNkv7wOKps3iMqpN7INFubbaT4uupFIL4p5rOtoylafq0t0lz7vybse6TPMfc+NGg8bW4nro8QS3q7deyzqcC8rhRuqDd78olk7E6YUSz0d590w9dreYVAfO2TAt306s5XW8aiZj1XXsW4wxcFjfBFUig9jPrqDa8Dp3EPCSX6O1nRhP6GIbZjMxHPY4CNGS/d9073ACWdhFR0zLlgeWziCwnpvcyrL3GOzILlv62fTNjUW5IrWHpo1ADRq4vqdbWJVDtv9RA5trry8LMWlBIc8aTTlqHCi7G/FTVDekJfuNBnLvMEtE5oUN5Z4e2aPWPe8Dh6VVVBmUBoOmOKP42gjymAh1CIsm99twqWnUy/LC/RifgGYixHM7FzYjwADhSptB4s35/6Q/zKnlcogxvQW6VlhiycnWmirUMLFNzeYg82fd0DHRDtr0bJzZEqMJhR4VvRO2af73u6XMS+tSaxuDwSC5ukL/4bszbkYrXizijm3s9A4tI/YhYv7eZtr1G92UXqIbH5UDnUyKnAtSlMOMR1e7czGJyDHpSbad2S//gtRrlLjfpk3/TlSGoyyuLEdTBaY3Y3NOTIMJrGeMziNmQThlkj8yvOkjerips6/jdCS6s6w42CmexR626+dcXZBphh434l+pAyr390l6it7sQsOlSr72gpqRzi4v6IMfKl4sOZBhGMWCAN+Cmyo9UdbrmGY9KKEJfUHx05ZTf1ghxk58PNKnGKl0v3WZfUJ5h4bBGvZg1HGuDO3bEBFAIAzIy81QRVPnrXOUp1iv+Kh8EqIlrjWM4flIEGh2LA/CtMmqoPLqbQZOfxgIaMiQHEDJzaUMfkJqwyndfBD9SfEyX0JKxbnNq4Tdr/gkNCLq0baI0tqEHdI4ZNKVarJHW2vLlaxSf8X2xOH87Hu24cjt6zp6NtCS8GfEKrBKOq8oYaVp/tOX8zmx5nE0cJrsAQBNifnJgwxH8yrmAJ+1iPnWMpV46KJHxABXJl3AF9m7szE6TqaTV0hORWxKNOVmCKOBlAV51eHwzWnoMM5a8uLv9vqhfXBbsg+fucCbBKlUEVE6dKvUFe2F2+aLrsk0Vg9wRrJs37+ZKjVUgghsb6z7pTSg6loKzA285TtOyjV5KC9DJbVh29hCjcJLDBXYWcKC13BcvLcmAfiqE4h5K9n3XjRrb/DdUKnu4TlmZS+9rk/SrYVknmo1ZAeqI6JBF9fuJUVarc4X2gDwMncnYfCMFfk6am7rBFlQ/whAzT6cfIhoSrQt1dy6XK6V6bu2z3jCY379DnlBVXm6QemfRAFCeRMHdSNPaxx7iZDc/fr+ZIBMEPyYX81mnZmAKF/ihEa+nxlfs0ujLFeMo3Kvm8hGHSQQQrFW0fXbaIKVB0M/rUctr+47OktotUsCiobKIHkpdBcx7w6pmz0c6oAr7waxbo7gbfV3vOrS8dbw/7RU46dgBy/bxr+iSRQgXoDrgVWPEFo7ry7nTWECjDSCGkuN5hlgwi/WF884SjGayhiQikCFGaKYXVfkt27AzUeJeigG4l6K4gyhzitPLvWA8rDVLSldT216BVhYA7yVkQmGJwUysgaZS/Z58tCUP6UZ/FYNR9ykJB78eTi031VQqVa60eNvGqeWZXJQeFfNc0T2WZ1O4RzEgaPH89x8Q9ox8SI2vfOlsqtV3LE1mawEyF7Vjyqc5hQ6+yHjTqHaYQr3bjklpfD2gB6/RBHcUShlmJBQFu8e5B9G5PlA83zz4iHq2dcTeWsQE14nIWqPa6lIJ0NZxMEw4eO3zoy/Fml0KZJy0T6g62SUCJBgzMF/Jk1tC4Ed8ROX0/TorUVf9bfZbRA8zEuRnSQdOwJcEmbrOnoxXfxi2ycwE8musG/bC8MjXK+DZFF2hfJ/vClMTyugZwx6sGt1yMnhW/OvoeDT1EjrHYHKq350Elg8ERqwuXqrlRM/fGr3Cwe5glNw3nlUg24K4Vf9bwxxGevUfmyMJ0Qxx90GxMSX5YmEO5UQ0bNf+NGmdfAMEdx2ZSxkSPdb8Y2A6x7FIYbiAF0xLw856O337vCxVOfNEngQdsYDYLTB46wJWbUrAZSD4iUxbo6NNUpkHdLyLWaSZeluWUkvic+C2v0lb6qKtznODLQ+MhRka7UZB8dOJu6SkVkkhHK8mx7gOUBDaVFqx0c5DZ5posL7ysV9/DeuxjjcBF2DR96y4BX3ybxt6kNV/lNMjlY4XmROFQS2q2qdZUgCOhxLC2lyLSUFDzhjbMPiZmUp27Dy8jv13gNUs2va9dH9N5P13IaPz/S0rUPJB/ZwLNFCSozGsvP+j1Sm/wYV+XF8ZNt9GKTTnzGG3AU6fg0Kgdxs9SS/rUzq81ap0bHl8jAQYAqnu8No5v3XaVwaDFqvs3JmhmYYw8IpJVUYaNm5mQDYHAHNMky1UF6RxOrpD0DdJvKj9xsDYAHUKiWyEMiRaMsm7g/WHufMWLujJUwe5TL372cozW9w09U8U2waqfggMR4hxigWIV9meB2mahzju4i0L5FDHULl+sFZ8oNdOByAT7Jb2xvewzzEbFO0fVyMv222qggyCIgRLa6RSGkjt9KH+BdkmR709GPjC8fWyZcyiyZtyvXl5+oOrLZhxqK7/k01xQ38hbd45meZymyaE27oE0JwzUN2/1l+PNP/PKGqBTZHjAHMyQ2JTI9Klxn+fQkE2gd2jyA71DwGHqW5+Sk5S4jntdeL98RBhbLwtOmKPeM0WQd7nHeAwFAZr2O/NU1f3qCxoHzKQwyv+WlH7ckeCbqVDgGW09ei0y0EG0kp+ESU6MSfnVqPNHiQk65QrUE6RWd5u2sGJ2Q1ic5V7p8zImep2c1ARtT/fOBK9R9StuSguBwOjrtuIMfTaXRLPf0AOlHJuBkINgiKnLwtu5xIikYZ9OAGbjQpDRzRccPkHpeUhzIr4bWMwI1q9dV3c3+6IJmVXp0NLOK9D3sRRJ/5Nehb2p46LimMCCKwlOvlOgK+UwqzeqegdVC/7Zd+3ei2EHTXP1PtS0OldpQQgjXKINxsXmvsxeoC/9uSdLi4/ieBjhw8k81yqddTXRyejfE7iWcZdeKOnUc/0dULnXtteOSxBv8cQN2bwbv35YDv6jf9KL25egggW/8eBo/rH0malfkIVMiolvg9XkLvmMVYIQbqsG+9CQho9ndYWgvdKgImcD83U+3FWgVoSczcxSOK2UCVIaHDTkTube87qvibD0biA/f/CRR8HADm0GhKQJ29uswG/zRXms0EV6VK1G3YrzJdkg90u4rxab5buECRm+V55OAoSHKYPsJ38MLDM7iyiDaTVdxFtZdfbbQCxzXUNRaC16lhEMg5YXEjmAS+VeNFKTLoGgz+ZQY/TE1N+SePXruyzvpPyLTP9oVefFv8FkC3V1U4GLsqQtniQKPi3/QjpUEtkwQejcqYPEL1bv8DpIInoa5wcngBlWzgROl+V3HhIsyY4CvX35uqu4GLIUgJZ4lzqMXUrbrYuFp1FGTi4DEed6AlYMwgHRo68NGHU2cLIOmtt9vE4E0wLZf1PQ3Fnl/wGWnyvdVcQKe8VVzKdWSobit1sR0ZQWyXzYiaPHCGYqGXRg2PHPALuRiUasVSGHnVfbQ+1uIw9wtG2Tj4oDn99Cn86kGP9WjlAM963KM/0bpOpjDH6+ncctQDCQX2VoMa0i2Z2+0GoclgSkEheTfWjuFiemoipF421u1OFQqc2fvLyPOrai1DY/Tgk7x4Jb2DTuaMFb2O0vWSR4PpCvAsEcnFtmhByPrTSLoA9kEyF1bEZMD+ZRkMiXKqzMa1Oo4Svab5YlkgAaN6jhKfE6TxnG2AJESJtlzER6HPsoufsI1kunB9/1UulVSgomgHmnyTgwXyr4fHiid8geNkbZKy1OpfQUhPbjPy6gsUjNzGaMbVO95EOlRzSLWxCJlDs78302fcHYo5EPM5KUlBAwTYZ8V0oiTYgERdx4LkPTsdjc4EEx/9sa+niwQr8kRGiXEnrp1TOI0BKbpN3E1L5deO5qbAIOYEsuuV3npojRSYN25Mw2bF2Gpi5VvRzE0klcuU/XmJn9CCX4ZceH6M3BX2ZGOSJNkwg+4jw0b4z8s/8v5GrQFjzhu468awwcU8gfnPHpiiPqBujS1KLFrFkSeWRwNsmwl0P4i3fgkZyEkEp0VsH5H5fGxmWkyg5eNd9IE7jMmb1cEoBNV+nS6z2c6/xNgZ2/fG8gFR7JzBbtXmOPxqalLBldBdm3VLAa23N1t/AKztLFg/6A9J38BCT/B8o2DWpADRihwb9LF8NCEHZxafxFeBKrrN4W0cZwmj9erm18akIH7/xLdslI3Av2tiuYMwnKQcRBZsqXrvxMIaJKSysZ/hplQjjTdiYldY+eencyF9mS4RhB7Lul0d77/Ds/+pEvdlbtOqdEo5iA902xZFfgiq7vs1BbxyLqlrD9notRsoET+5ZPhW2reSrbZlGribwMh0qBSdIeNwgbpaUvCVjjEy+xn4xj9XhgDo9yrXyujtjtflWmpd2+iX52bjb5JoVmlQLUqXdkuaMkBvZ6TOzVUIMaqovRgETzRb7Z8aNhfNlgbTZ/xyqhKokGf/oN6mljr1TPsGpM7M/VijDtWBv7SqcCAzh4Z0xgYK2ptFvfbOcKreLYM1iVLz0UV7igTK5N70MB2CrZ92Pg80Mq9hnNvFdqkpp6j7zBNYQlpiL7Ru+vqZCCm4OOJEN746Z4SkidqshEUXXqVcZIyrgMutA/u4068dWYHMDAk7qSWXS+porN9OK5qVm8WgrhZoCTlw3tnfrEm9+X4MrmiZZDcf/C2hl5pD/KA6cIyL5j34i5Fg0nxMVRC4YnfWHaqfPEoOgr3tRnDMNOmVlb7CMKO5+xIrWu6RwknZxtc38Z+80awjGVu5UY8innQ7c+i6UOMtkrYUqCZ8UYUemSJ11kwN5TncKhiUyrk3efKErlVf4hMWpt68gosbpkSfRNCjoONVJreEDybZlUhni+GLD+lXo2oVdzHDznr4cRH3Wlsler+3dDWfDN1/3+bvBGxd9fQyxP96+8nOkSqe7oY7QCiEPKSl6RBmyU8GrYTFJ9Sp/e8eBfzOnfgXgu27skpVVrpXdsehRy0/l+Ji57VHtb+PSHa/qGQm9DsAPwsIW73i4jugyaA7IvEvLQvFVy63z98ncvlsbQ1i4eFMjLzpaxyifW8PETBe6ntkuUTePmq9jTSNdKf2B47zrS6pnV2TKyjqKz6QC3unlvLJHjFSCpzgfsDgqs1oSKyTfhSIpcjr/sEJqbzR4epSOFrX7qhforswf2zr0+NJjjZa5kaB2ttItvqkZl8pnaCVQlbKlXqg7bgu7DcBxKE0TcmQ2TM4RCva7D9Y+vLF0PIftSm2uraAqUpJXPku7+4eyF0Jhm/gP5rJSwZbnlDO6JJS78C/C5Kev9h+WxajkhXptoFoLePem8MLSlMKpTxBeY+gxKRG3tDXkapEdCFwTfZ92JyaX7Xu3t+zB54n+0k3sSBdhmFAVUFB7ist2KmFun4xPFe4hvzE4x/RyBZm5v1CayWyK/SgR5mrGKxMBaq4FoJQSXX9VHFomDqiJyNH5jjGMfeEe+TEtfb3nPFc9zC+p0Fsre1uCNhpXwOYWiVy9F6Znyon2IZnmocs0klCvARNryGvhH0nTRAFuToF3SBOeEHM67KOVJNSeVlVytyfcokhHJK49KCz5C8KmOMsy4AhtUmNEdEjIjIBGUV26Ptczu91wx+ip3sakYmSTai6sd58R2LCqLTSu+4oaQmES3Moke5B30ec1+EayA2w+OFKQB8xM8Nlr8QPfrk5hyUEk6F1riDdVoOJkJxLaxx/N6zj8e7CwutrUia3H3dFQDPL5i/EzoxlaYhteAE9fs59tZs5wcOwTGfYAESFo1zvp4wxoQfP+OImXeqHdWZwPCDj4aOUNb5x/z6yS/gjDbxt/Zuz1BdioECV6d4t7Nm2HH6KLhibTvfCDF/DxHulXQz0UG4WWF1xxZMTsnWtRamSl392QAfT5+u3asCbIlIwRijJPuGLqckjuBmXBoYBzdMnpz4s241y/etMEs3ICs2Filkup9EsRM4kbskgee57Ue8StNgts1rRpVXo8h8Hj9VOEuY0UinRYsU3usA8eLZwugGWOs2Ir4N8O/H9DHHZtBAmzXRUcTAFhTPmEDwVbslYL0RV4ZlVv8UDBE8jDr06fTT67PX0Ck9Yrlz8dvZ4In9hbTUGltz42YcDO/gAx7PvG5D8qFw9BgOngmaHmxe+xitRff3VNfW9WTVQaH2hkjZTIlEI/iTePhSf0RvCtsyNaDUSjI7FsHVQM4119fl7+WXB5JjfJ6HDJQnO5TdXTgDFL3WityshejQ3b9IdxN0yDbixpWYrysR3ygMmsDvJH9WkNUN+VD9hcdQ45Ps5j+USMZEfig9CCGcd2rZSniBtuJ6KPGQCtVvjcEmZVnwW7EV1FWaDR5Zjy5Sw03TY5DqkvO6eZYOdL/riyptjyxYYBGL2K5JavzhevZAsd2MCeIaWvI5sB162eDphFFQKprzV7+6pHCGQRnPXKVriknOOO4ZZNKKTGyb/8TcduBTB2bm+m/VMOgyAa5yubo/82yVKuV5xQAoLPaUREul923C0uwXQauYDr63YA+drfuaCCjO9+jlxVIHILT6GT4SYa/DFMec5J/GKv21EdlEB71cCtfUZ3zNkFdrOACpM+Hw0FrH4TbYtwAVuGlGupeZ37FuWLHJWcLX5+p16nC3jg5ee6ON3OBYXJDQBxEZfkmcUz9MlDBRJGmLzCWMMNgVbSXPqnnc9yam5sVHcd1wkuF5IA18WBdrE9yJ0ewuVaPAK7W9YU24WsZM2CXXkijrXNPOgrUg6H5vnq8s+G3LZFrbq3DSeKysUyWX0TmToDg4oIYEUOIStQH04Pm0gZcUfsBxr20TAzfJhz0PuTJDMPl+VOZXLf15TVchXmex7jsaOpZpQzRoLRImFv3CoKwb1ozLq/arntiqH1ADD7Y70I5qSx5PFDADlHWbT3U3Y83CA9TzWFr1FNwT3e68AfNwd8Rk73LElkXpjRWZCep+EnKl7ukEXeBRgibqUXLmQqmzktbVPLWoFkOPAEVQYkwBs3S58Oz2tedeo0RXzRPLJ6/TXYxjmyoOPIQGIxLZ6hce1vCPfp1GXRl4nM646BFPzxjHJFQJI6qXPmX6kIFuz11D7X5ZPQVRGLhVDfwgMesRlEel1no1W3dkSJcboolhB0RhfPGX1gYAAa+FFItNCs9I9bQ7n+pokPQZgKF0YahfY58dGVuZcQa/Qp+EVtOiFou1LdG/BXkeMS5ty1Tz6onrk/8x3lqktjaQw6sodeq7PXg56e6HziKgnmulvpqnk5jrfeQI4BfL4/Vr9ZYSHrAkDe+HiSDHchBz6rSTDE5WsNrRYM/vvUF3r6lovtd8+IZjQaBbxIeqmXWvUcI/0Hg8aYbzBdsZk1j2xrIHNdn5q7m4zFN2HeBiZzTXVqw+YgnC8PGr0fA0VRFKiAIuaHKRIFPX+mfWtnN1N+GIDElR08n1vJR33y8LViCav0vtlbzXLHVPWlLEmL077jmnQMKhJo+OGU2b6dOm0mkYJaI9n7hQmZc4Dibpv34WLKsq+GRgSNmfUymS+Y9fOZdtgwLCwD/U/mSdbUWspYItgYjF/6kyG4NkbejYMlxg4QyhKhbAsYnrrqfgPgP96chMPNFlNY4ESEW6nc/CC9LM6s2ZenqtXchfTN7VWdjCFMPkA1jQ4jmaee205cspJjNGLb5TPZ+5rGuDOrcgiNHjt1AaXawiLG7V2f1OhMcuRXFEcmxkfnTVc0YeUF+KJ5o+aD4p9keV8VO1KGxTfMzcXboaZavZ82Ww4uHbpeTXT3wmE57Lo3KTXSh2UH518GVI3f4Ymy6AteEKoyo5yhKdpC3e5s/EAjIRFWEFjfzrXGgxYNQiuSvvnNelf32vj1xom18SMCWJWnmGEZa9r53nS1J1F0s4sDkHYaoTX7bXxRLmacM86nXc/reFjssWoqv/jxRbM1vaq5WEbDJjx6DDMJYZj8JtIrXHPdirTgGQj8gVa0jRWaJCRHYp5JZpRUjpVPK3fmKVMzGgm/VcdYqrRVUiM2qVewPobZkDCJ9NhoUCoCfukvbs8EfxWQ45jTzGWcS11FfYVt9CiSFlLplWOAFD5KkA10bWmis8TidxG6inuxK4XazmrI2wBZtzLKbzQugheJxGQHNpUdlqjlxL1WjraB2Mww/7j5Cl1UHcG0VlAAYEtcfmv0jTsQUuYgQz3qtk03JsupbywHglkxiyEEJmGEyEQmO+oVuoyLDMHsbzTtFYi8+sU60P6RwPf54J5prlUQuOpuUbMat9N8SxJ6/oSR4oXb3dmL/ZIV/fEmsOplcRGsKhCQPhBWuswjwHa0KJjYdR1GyMm7slZrZ7yZoXiDF/cS2dOTjxFHQoom+3vLBB4dJRehs960f1FlNVpAnIHOSb2sfaFZyux0ZsQOxqv/Yzn3vRqsBJMnWV+w6eGL2TJbZBcGizCUIrggtYvCWq+A65CzpOChmrfYKLdfXh8f0CtLb4/GzSF7Lb2N00p6x2r0DnIhOkQ/I+wHCIGz6BJxUl3kI1vPDlJotiIvUCwU7z2vncTqSWqhtB7M15me0BwfaF3T4Yvllno/osTrUPHUh3k/ztwrZbHOMGHHS+o0xRP0v5qBsLwIY0FbuTEQOTiyRWnV2y85BkjNrK8ugTL475gDWCNotkxLek+ZmPp5Pfa2gTC4W9uMT4wtMAXsqx2VBA5B+EONCb4VgzGeAE58C3Cr23Ta8ZY5Mz9i1ivWvu/7Bduoldu9JVZqRAHlHHAIUn+QHI3pXYWIq808tbMLj/ugAK7y2y8+2rZKtZJFFEmlsXDagnn1clGagGMjB8WZsWIeAyI8iqjDOnROMO3CpbGxDKvqK0XCNl4zrjkxKUQBwYB15IFef/GClJI6tSMxiKvcKsVtTDAsUvKM50wu/mlxz4S8AJ30ktzhTL7I+0r0T9WXVSwYkZQrLSnlHWXwPLbPhW3zg4GcgjWcZHuQxFKzxtMFAGpHME0IGDgzPOaw3w3/vg9uDPHi0JochLtvKg0m6YaqOChgRywPvRlN0+cRbYxQsecSslpgh70zBDn20y3eG+hoH/rAbdtRTAmnxnKH08/zL7IWR6m/IAceFCgyDstQ/YMogDsVUpMG+ddlD6b/oKd6qFjjfo+wqvKESYqmIZ2JIOXDHWg4dFSBu5uB5OAz+ftxzL41ktITHS3QkqvDpAWQsZPdO5UUI3kZMkszoRz3h6M8510Ih
</div>
<script src="/lib/crypto-js.js"></script><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">
      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/网络安全/" rel="tag"># 网络安全</a>
          
            <a href="/tags/AWS/" rel="tag"># AWS</a>
          
           <a href="https://book.xd10086.com/categories/%E9%BB%91%E5%AE%A2/" rel="tag"># 黑客书籍</a>
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/09/24/88_FRP搭建/" rel="next" title="FRP服务器搭建">
                <i class="fa fa-chevron-left"></i> FRP服务器搭建
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/09/26/91_crontab使用技巧/" rel="prev" title="crontab使用技巧">
                crontab使用技巧 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>


    <div class="post-spread">
<script data-ad-client="ca-pub-9873623505122626" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<img src="https://i.imgur.com/0ivBlsQ.jpg" alt="知识星球">

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
<script data-ad-client="ca-pub-9873623505122626" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="https://i.imgur.com/luMBjvD.jpg" alt="vsyour">
          <p class="site-author-name" itemprop="name">vsyour</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
           
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">166</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">30</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">70</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/vsyour" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/vsyour" target="_blank" title="新浪微博">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  新浪微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.facebook.com/vsyour" target="_blank" title="FaceBook">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  FaceBook
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.vksec.com/" title="Openresti" target="_blank">Openresti</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.vsyour.com/" title="Blog" target="_blank">Blog</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://vksec.com/2018/01/29/23_vksec_操作记录/" title="操作记录" target="_blank">操作记录</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://shang.qq.com/wpa/qunwpa?idkey=c3e0580ecf8d705036d1901d44121f3b4e2c3b6a4ad7b417e968784345b01380" title="QQ群" target="_blank">QQ群</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">vsyour</span>
</div>


<!-- <div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>


<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>
-->


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  

    
      <script id="dsq-count-scr" src="https://vksec.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'http://vksec.com/2019/09/25/89_记AWS一次错误操作的恢复过程/';
          this.page.identifier = '2019/09/25/89_记AWS一次错误操作的恢复过程/';
          this.page.title = '记AWS一次错误操作的恢复过程';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://vksec.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  





  








  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      $('#local-search-input').focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            var resultItems = [];
            if (this.value.trim().length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCountInArticle = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword, i) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCountInArticle = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  var resultItem = '';

                  function highlightKeyword(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;

                    var matchText = text.substring(start, end);
                    var matchResult = [];
                    var prevEnd = 0;
                    while (position + word.length <= end && index.length != 0) {

                      // highlight keyword

                      var wordBegin = position - start;
                      var wordEnd = position - start + word.length;
                      matchResult.push(matchText.substring(prevEnd, wordBegin));
                      matchResult.push("<b class=\"search-keyword\">" + matchText.substring(wordBegin, wordEnd) + "</b>");

                      // move to next position of hit

                      index.pop();
                      prevEnd = wordEnd;
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (prevEnd > position - start) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    matchResult.push(matchText.substring(prevEnd));
                    return matchResult.join('');
                  }

                  // sort index by position of keyword

                  indexOfTitle.sort(function (itemLeft, itemRight) {
                    return itemRight.position - itemLeft.position;
                  });

                  indexOfContent.sort(function (itemLeft, itemRight) {
                    return itemRight.position - itemLeft.position;
                  });

                  // highlight title

                  if (indexOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, 0, title.length, indexOfTitle) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  // highlight content

                  var resultUpperBound = parseInt(1);
                  var withoutUpperBound = false;
                  if (resultUpperBound === -1) {
                    withoutUpperBound = true;
                  }
                  var currentResultNum = 0;
                  while (indexOfContent.length != 0 && (withoutUpperBound || (currentResultNum < resultUpperBound))) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    resultItem += "<a href='" + articleUrl + "'>" +
                    "<p class=\"search-result\">" + highlightKeyword(content, start, end, indexOfContent) +
                    "...</p>" + "</a>";
                    currentResultNum++;
                  }
                  resultItem += "</li>";
                  resultItems.push({item: resultItem, hitCount: hitCountInArticle, id: resultItems.length});
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              $resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              $resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.hitCount != resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultLeft.id - resultRight.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result, i) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              $resultContent.innerHTML = searchResultList;
            }
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>





  

  

  

  

  

</body>
</html>
