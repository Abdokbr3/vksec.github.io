<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">





<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css">


  <meta name="keywords" content="网络安全,AWS,">





  <link rel="alternate" href="/atom.xml" title="Openresty Python LUA" type="application/atom+xml">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1">






<meta name="description" content="请输入密码,有问题请加QQ群:397745473">
<meta name="keywords" content="网络安全,AWS">
<meta property="og:type" content="article">
<meta property="og:title" content="记AWS一次错误操作的恢复过程">
<meta property="og:url" content="http://vksec.com/2019/09/25/89_记AWS一次错误操作的恢复过程/index.html">
<meta property="og:site_name" content="Openresty Python LUA">
<meta property="og:description" content="请输入密码,有问题请加QQ群:397745473">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-09-25T06:05:25.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="记AWS一次错误操作的恢复过程">
<meta name="twitter:description" content="请输入密码,有问题请加QQ群:397745473">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://vksec.com/2019/09/25/89_记AWS一次错误操作的恢复过程/">



  <title>记AWS一次错误操作的恢复过程 | Openresty Python LUA</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  














  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Openresty Python LUA</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">QQ群:397745473</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocapitalize="off" autocomplete="off" autocorrect="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>

<script data-ad-client="ca-pub-9873623505122626" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://vksec.com/2019/09/25/89_记AWS一次错误操作的恢复过程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="vsyour">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://i.imgur.com/luMBjvD.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Openresty Python LUA">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                记AWS一次错误操作的恢复过程
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-25T03:03:03+08:00">
                2019-09-25
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AWS/" itemprop="url" rel="index">
                    <span itemprop="name">AWS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/09/25/89_记AWS一次错误操作的恢复过程/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/09/25/89_记AWS一次错误操作的恢复过程/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script>
<div id="hbe-security">
  <div class="hbe-input-container">
  <input type="password" class="hbe-form-control" id="pass" placeholder="请输入密码,有问题请加QQ群:397745473">
    <label for="pass">请输入密码,有问题请加QQ群:397745473</label>
    <div class="bottom-line"></div>
  </div>
</div>
<div id="decryptionError" style="display: none;">Incorrect Password!</div>
<div id="noContentError" style="display: none;">No content to display!</div>
<div id="encrypt-blog" style="display:none">
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
</div>
<script src="/lib/crypto-js.js"></script><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">
      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/网络安全/" rel="tag"># 网络安全</a>
          
            <a href="/tags/AWS/" rel="tag"># AWS</a>
          
           <a href="https://book.xd10086.com/categories/%E9%BB%91%E5%AE%A2/" rel="tag"># 黑客书籍</a>
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/09/24/88_FRP搭建/" rel="next" title="FRP服务器搭建">
                <i class="fa fa-chevron-left"></i> FRP服务器搭建
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/09/26/91_crontab使用技巧/" rel="prev" title="crontab使用技巧">
                crontab使用技巧 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>


    <div class="post-spread">
<script data-ad-client="ca-pub-9873623505122626" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<img src="https://i.imgur.com/eGNMc8d.png" alt="知识星球">

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
<script data-ad-client="ca-pub-9873623505122626" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="https://i.imgur.com/luMBjvD.jpg" alt="vsyour">
          <p class="site-author-name" itemprop="name">vsyour</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
           
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">217</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">30</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">72</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/vsyour" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/vsyour" target="_blank" title="新浪微博">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  新浪微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.facebook.com/vsyour" target="_blank" title="FaceBook">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  FaceBook
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.vksec.com/" title="Openresti" target="_blank">Openresti</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.vsyour.com/" title="Blog" target="_blank">Blog</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://vksec.com/2018/01/29/23_vksec_操作记录/" title="操作记录" target="_blank">操作记录</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://shang.qq.com/wpa/qunwpa?idkey=c3e0580ecf8d705036d1901d44121f3b4e2c3b6a4ad7b417e968784345b01380" title="QQ群" target="_blank">QQ群</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">vsyour</span>
</div>


<!-- <div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>


<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>
-->


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  

    
      <script id="dsq-count-scr" src="https://vksec.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'http://vksec.com/2019/09/25/89_记AWS一次错误操作的恢复过程/';
          this.page.identifier = '2019/09/25/89_记AWS一次错误操作的恢复过程/';
          this.page.title = '记AWS一次错误操作的恢复过程';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://vksec.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  





  








  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      $('#local-search-input').focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            var resultItems = [];
            if (this.value.trim().length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCountInArticle = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword, i) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCountInArticle = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  var resultItem = '';

                  function highlightKeyword(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;

                    var matchText = text.substring(start, end);
                    var matchResult = [];
                    var prevEnd = 0;
                    while (position + word.length <= end && index.length != 0) {

                      // highlight keyword

                      var wordBegin = position - start;
                      var wordEnd = position - start + word.length;
                      matchResult.push(matchText.substring(prevEnd, wordBegin));
                      matchResult.push("<b class=\"search-keyword\">" + matchText.substring(wordBegin, wordEnd) + "</b>");

                      // move to next position of hit

                      index.pop();
                      prevEnd = wordEnd;
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (prevEnd > position - start) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    matchResult.push(matchText.substring(prevEnd));
                    return matchResult.join('');
                  }

                  // sort index by position of keyword

                  indexOfTitle.sort(function (itemLeft, itemRight) {
                    return itemRight.position - itemLeft.position;
                  });

                  indexOfContent.sort(function (itemLeft, itemRight) {
                    return itemRight.position - itemLeft.position;
                  });

                  // highlight title

                  if (indexOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, 0, title.length, indexOfTitle) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  // highlight content

                  var resultUpperBound = parseInt(1);
                  var withoutUpperBound = false;
                  if (resultUpperBound === -1) {
                    withoutUpperBound = true;
                  }
                  var currentResultNum = 0;
                  while (indexOfContent.length != 0 && (withoutUpperBound || (currentResultNum < resultUpperBound))) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    resultItem += "<a href='" + articleUrl + "'>" +
                    "<p class=\"search-result\">" + highlightKeyword(content, start, end, indexOfContent) +
                    "...</p>" + "</a>";
                    currentResultNum++;
                  }
                  resultItem += "</li>";
                  resultItems.push({item: resultItem, hitCount: hitCountInArticle, id: resultItems.length});
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              $resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              $resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.hitCount != resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultLeft.id - resultRight.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result, i) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              $resultContent.innerHTML = searchResultList;
            }
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>





  

  

  

  

  

</body>
</html>
