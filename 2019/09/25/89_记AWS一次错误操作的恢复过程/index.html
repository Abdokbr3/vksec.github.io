<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">





<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css">


  <meta name="keywords" content="网络安全,AWS,">





  <link rel="alternate" href="/atom.xml" title="Openresty Python LUA" type="application/atom+xml">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1">






<meta name="description" content="请输入密码,有问题请加QQ群:397745473">
<meta name="keywords" content="网络安全,AWS">
<meta property="og:type" content="article">
<meta property="og:title" content="记AWS一次错误操作的恢复过程">
<meta property="og:url" content="http://vksec.com/2019/09/25/89_记AWS一次错误操作的恢复过程/index.html">
<meta property="og:site_name" content="Openresty Python LUA">
<meta property="og:description" content="请输入密码,有问题请加QQ群:397745473">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-09-25T06:05:25.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="记AWS一次错误操作的恢复过程">
<meta name="twitter:description" content="请输入密码,有问题请加QQ群:397745473">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://vksec.com/2019/09/25/89_记AWS一次错误操作的恢复过程/">



  <title>记AWS一次错误操作的恢复过程 | Openresty Python LUA</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  














  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Openresty Python LUA</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">QQ群:397745473</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocapitalize="off" autocomplete="off" autocorrect="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>

<script data-ad-client="ca-pub-9873623505122626" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://vksec.com/2019/09/25/89_记AWS一次错误操作的恢复过程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="vsyour">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://i.imgur.com/luMBjvD.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Openresty Python LUA">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                记AWS一次错误操作的恢复过程
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-25T03:03:03+08:00">
                2019-09-25
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AWS/" itemprop="url" rel="index">
                    <span itemprop="name">AWS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/09/25/89_记AWS一次错误操作的恢复过程/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/09/25/89_记AWS一次错误操作的恢复过程/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script>
<div id="hbe-security">
  <div class="hbe-input-container">
  <input type="password" class="hbe-form-control" id="pass" placeholder="请输入密码,有问题请加QQ群:397745473">
    <label for="pass">请输入密码,有问题请加QQ群:397745473</label>
    <div class="bottom-line"></div>
  </div>
</div>
<div id="decryptionError" style="display: none;">Incorrect Password!</div>
<div id="noContentError" style="display: none;">No content to display!</div>
<div id="encrypt-blog" style="display:none">
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
</div>
<script src="/lib/crypto-js.js"></script><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">
      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/网络安全/" rel="tag"># 网络安全</a>
          
            <a href="/tags/AWS/" rel="tag"># AWS</a>
          
           <a href="https://book.xd10086.com/categories/%E9%BB%91%E5%AE%A2/" rel="tag"># 黑客书籍</a>
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/09/24/88_FRP搭建/" rel="next" title="FRP服务器搭建">
                <i class="fa fa-chevron-left"></i> FRP服务器搭建
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/09/26/91_crontab使用技巧/" rel="prev" title="crontab使用技巧">
                crontab使用技巧 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>


    <div class="post-spread">
<script data-ad-client="ca-pub-9873623505122626" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<img src="https://i.imgur.com/0ivBlsQ.jpg" alt="知识星球">

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
<script data-ad-client="ca-pub-9873623505122626" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="https://i.imgur.com/luMBjvD.jpg" alt="vsyour">
          <p class="site-author-name" itemprop="name">vsyour</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
           
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">166</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">30</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">70</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/vsyour" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/vsyour" target="_blank" title="新浪微博">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  新浪微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.facebook.com/vsyour" target="_blank" title="FaceBook">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  FaceBook
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.vksec.com/" title="Openresti" target="_blank">Openresti</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.vsyour.com/" title="Blog" target="_blank">Blog</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://vksec.com/2018/01/29/23_vksec_操作记录/" title="操作记录" target="_blank">操作记录</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://shang.qq.com/wpa/qunwpa?idkey=c3e0580ecf8d705036d1901d44121f3b4e2c3b6a4ad7b417e968784345b01380" title="QQ群" target="_blank">QQ群</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">vsyour</span>
</div>


<!-- <div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>


<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>
-->


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  

    
      <script id="dsq-count-scr" src="https://vksec.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'http://vksec.com/2019/09/25/89_记AWS一次错误操作的恢复过程/';
          this.page.identifier = '2019/09/25/89_记AWS一次错误操作的恢复过程/';
          this.page.title = '记AWS一次错误操作的恢复过程';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://vksec.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  





  








  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      $('#local-search-input').focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            var resultItems = [];
            if (this.value.trim().length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCountInArticle = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword, i) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCountInArticle = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  var resultItem = '';

                  function highlightKeyword(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;

                    var matchText = text.substring(start, end);
                    var matchResult = [];
                    var prevEnd = 0;
                    while (position + word.length <= end && index.length != 0) {

                      // highlight keyword

                      var wordBegin = position - start;
                      var wordEnd = position - start + word.length;
                      matchResult.push(matchText.substring(prevEnd, wordBegin));
                      matchResult.push("<b class=\"search-keyword\">" + matchText.substring(wordBegin, wordEnd) + "</b>");

                      // move to next position of hit

                      index.pop();
                      prevEnd = wordEnd;
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (prevEnd > position - start) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    matchResult.push(matchText.substring(prevEnd));
                    return matchResult.join('');
                  }

                  // sort index by position of keyword

                  indexOfTitle.sort(function (itemLeft, itemRight) {
                    return itemRight.position - itemLeft.position;
                  });

                  indexOfContent.sort(function (itemLeft, itemRight) {
                    return itemRight.position - itemLeft.position;
                  });

                  // highlight title

                  if (indexOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, 0, title.length, indexOfTitle) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  // highlight content

                  var resultUpperBound = parseInt(1);
                  var withoutUpperBound = false;
                  if (resultUpperBound === -1) {
                    withoutUpperBound = true;
                  }
                  var currentResultNum = 0;
                  while (indexOfContent.length != 0 && (withoutUpperBound || (currentResultNum < resultUpperBound))) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    resultItem += "<a href='" + articleUrl + "'>" +
                    "<p class=\"search-result\">" + highlightKeyword(content, start, end, indexOfContent) +
                    "...</p>" + "</a>";
                    currentResultNum++;
                  }
                  resultItem += "</li>";
                  resultItems.push({item: resultItem, hitCount: hitCountInArticle, id: resultItems.length});
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              $resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              $resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.hitCount != resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultLeft.id - resultRight.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result, i) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              $resultContent.innerHTML = searchResultList;
            }
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>





  

  

  

  

  

</body>
</html>
